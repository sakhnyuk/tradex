webpackJsonp([1],{1018:function(t,e,n){"use strict";function i(t){for(var e=0;e<d.length;e++)if(d[e].name===t)return e;return-1}function s(t){if(!f)for(var e=d.length-1;e>=0&&!0!==d[e].func(t);e--);}function o(t){t.addEventListener("keypress",s,!1)}function r(t,e){var n={name:t,func:e},s=i(n.name);s>-1?d[s]=n:d.push(n)}function a(t){d.forEach(function(e,n){e.name===t&&d.splice(n,1)})}function l(t,e){var n={name:t,func:e},s=i(n.name);s>-1&&d.splice(s,1),d.unshift(n)}function c(){return f?null:f=Object(h.randomHashN)(4)}function u(t){if(t!==f)throw Error("Lock id is outdated");f=null}var p,h,d,f;Object.defineProperty(e,"__esModule",{value:!0}),e.listen=o,e.registerListener=r,e.removeListener=a,e.pushBackListener=l,e.disable=c,e.enable=u,p=n(14),n.n(p),h=n(45),d=[],f=null,o(window)},1102:function(t,e,n){"use strict";var i=n(5);t.exports.displayedExchangesFilter=function(t){return i.enabled("symbol_search_limited_exchanges")&&(t=t.filter(function(t){return!("bitcoin"===t.flag||t.hideInSymbolSearch)})),t},t.exports.sortExchangesListByFlagIfNeeded=function(t){return t}},1103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"types",function(){return i});var i={ECONOMIC:"economic",QUANDL:"quandl"}},73:function(t,e,n){"use strict";(function(e){function i(){if("undefined"==typeof tradingService)return null;var t=tradingService();return t&&t.connectStatus()===CONNECTSTATUSES.CONNECTED?t.activeBroker():null}function s(){var t=i();if(t&&t.metainfo().configFlags.supportSymbolSearch)return t.metainfo().symbolSearchId||t.metainfo().id.toLowerCase()}function o(t){u(t),p.interval.setValue(t)}function r(t){return I[t.prefix||t.exchange]||t.exchange||""}function a(){var t=TVSettings.getValue("symboledit.exchangefilter");return/_MINI$/.test(t)?"":t}function l(t,e){return e in t||(t[e]="bitcoin"===e?window.t("crypto"):window.t(e)),t[e]}var c=n(36),u=c.setLastUsedResolution,p=n(59).linking,h=n(1102),d=n(1018),f=n(332).Spinner,g=n(144),_=n(347).regExpEscape,m=n(1103),y=n(211),v=n(81).isFeatureEnabled,b=n(118).sanitizeIntervalValue,S=n(118).canShowSpreadActions,E=v("futures-descriptions"),I={},w=/^(\w{3,4}) (\d{4})$/,x=function(){function t(n){var i,s,o,r;if(!(this instanceof t))throw new TypeError("SymbolSearch is a constructor");if(n=n||{},i=!n.dontUseInputParser&&e.enabled("symbol_search_parser_mixin")&&S(),this._inputParserMixin=i?new SymbolSearchInputParserMixin(this):void 0,this._inputElement=$(n.input).get(0),!this._inputElement)throw new TypeError("options.input must be a DOM element, jQuery object or selector");if(this.$list=$(n.list).eq(0),0===this.$list.size()&&delete this.$list,void 0!==n.callback){if("function"!=typeof n.callback)throw new TypeError("options.callback must be function");this._callback=n.callback}if(void 0!==n.onValueChanged){if("function"!=typeof n.onValueChanged)throw new TypeError("options.onValueChanged must be function");this._onValueChanged=n.onValueChanged}if(void 0!==n.onEmptyApply){
if("function"!=typeof n.onEmptyApply)throw new TypeError("options.onEmptyApply must be function");this._onEmptyApply=n.onEmptyApply}if(n.ignoreInterval&&(this._ignoreInterval=!0),t.resetStoredInterval(),n.hidePro&&(this._hidePro=!0),n.allowMultipleSymbols&&(this._allowMultipleSymbols=!0),void 0!==n.onParse){if("function"!=typeof n.onParse)throw new TypeError("options.onParse must be function");this._onParse=n.onParse}for(this._state={},this._resolveViaSymbolSearchId=null,this.acceptEmpty=!!n.acceptEmpty,$(this._inputElement).data("symbol-search-instance",this),s=this._boundListener=this._eventListener.bind(this),o=this.boundTimeoutListener=function(t){setTimeout(function(){s(t)},0)},r=0;r<R.length;r++)R[r].immediate?$(this._inputElement).on(R[r].name,s):$(this._inputElement).on(R[r].name,o);this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnKeyPress=this._onKeyPress.bind(this),$(this._inputElement).on("keydown",this._boundOnKeyDown).on("keypress",this._boundOnKeyPress),this._eventListener(),n.autoFocus&&t.registerAutoFocus(this)}function c(t,e){var n,i=ChartApiInstance.supportedSymbolsTypes();return s()&&(i=i.filter(function(t){return"quandl"!==t.value&&"economic"!==t.value})),n=TVSettings.getValue("symboledit.filter"),!i.some(function(t){return t.value===n})&&i.length>0&&(n=i[0].value),0!==i.length&&(i.forEach(function(i){var s=i.value,o=$('<a class="type-filter">').attr("href","#"+s).text($.t(i.name));s===n&&o.addClass("active"),o.on("click",function(n){n.preventDefault(),e.find(".type-filter").removeClass("active"),$(this).addClass("active"),t.typeFilter(s),TVSettings.setValue("symboledit.filter",s)}),o.appendTo(e)}),t.typeFilter(n),!0)}function u(t,e){var n,i,s=ChartApiInstance.supportedExchangesList();if(s.reduce(function(t,e){return t[e.value]=e.name,t},I),n=a(),"bovespa"!==TradingView.widgetCustomer)return 0!==s.length&&(i=$('<div id="exchange-filter" class="exchange-filter">').appendTo(e),D(t,s,n,i),t.setExchangeFilter(n),!0)}function x(t){var e=u(t,t.$filterContainer);return t.selectExchangeFilter(),e}function C(t){var e,n,i,s,o,r,a,l,u,p,h=$('<div class="symbol-edit-popup">').appendTo(document.body),d=$('<div class="filter">').appendTo(h);return t.$filterContainer=d,c(t,d),x(t,d),e=$('<div class="table-wrapper">').appendTo(h),n=$(t._inputElement),i=n.offset(),s=0,o=Math.max(0,Math.min(i.left+s,$(window).width()-h.outerWidth())),h.css("left",o+"px"),h.css("top",i.top+n.outerHeight()+1),r=d.outerHeight(),a=$(window).scrollTop(),l=n.height(),u=TradingView.isMobile.any()?parseInt(window.screen.height,10):parseInt($(window).height(),10),p=u-(i.top-a)-l/2,e.css("maxHeight",p-l-r+"px"),{popup:h,listWrapper:e}}function T(t){return!t.ctrlKey&&(!t.metaKey&&(!!t.charCode&&(!(!t.which||t.which<=32)&&(!/^(input|textarea)$/i.test(t.target.tagName)&&!TVDialogs.modalDialog))))}function k(t,e,n){this._container=t,this._tickerRegExp=e,this._translationCache=n,this._exchangeNameCache=this._roots={},this._itemsByTicker={}}var L,V,D,R=[{name:"input",immediate:!0},{name:"sync",immediate:!0},{name:"keypress"},{
name:"keydown"},{name:"keyup"},{name:"mousedown"},{name:"mouseup"},{name:"cut"},{name:"paste"}],A=!0;return A=!1,L=[/^e\-m/i],V=/<\/?[^>]+(>|$)/g,t.registerAutoFocus=function(e){if(e instanceof jQuery&&(e=e.data("symbol-search-instance")),!(e instanceof t))throw new TypeError("arg must be an SymbolSearch instance of jQuery input with bound SymbolSearch object");d.registerListener("symbolEdit",function(t){if(T(t)){t.preventDefault(),this.resetState(),this._skipAutoFocus=!0,this._inputElement.focus();var e=String.fromCharCode(t.charCode);"function"==typeof this._setInputValue?this._setInputValue(e):this._inputElement.value=e,this._eventListener()}}.bind(e))},t.prototype.searchRequestDelay=0,t.setSearchRequestDelay=function(e){t.prototype.searchRequestDelay=e},t.prototype.resetState=function(){this._state={}},t.prototype.typeFilter=function(t){if(!(arguments.length>0))return this._state.typeFilter;t!==this._state.typeFilter&&(null==t?delete this._state.typeFilter:this._state.typeFilter=t+"",delete this._state.keepListFor,this._onSelectionChanged(),this.selectExchangeFilter())},t.prototype.setExchangeFilter=function(t){t!==this._state.exchangeFilter&&(null==t?delete this._state.exchangeFilter:this._state.exchangeFilter=t+"",delete this._state.keepListFor,this._onSelectionChanged())},t.prototype.setTradableFilter=function(t){t!==this._state.tradableFilter&&(this._state.tradableFilter=t,this._onSelectionChanged())},t.prototype.getExchangeFilter=function(){return this._state.exchangeFilter},t.prototype.destroy=function(){$(this._inputElement).off(),$(this._inputElement).removeData("symbol-search-instance")},t.prototype._moveSelection=function(t,e){var n,i,s,o,r,a,l,c,u;this.$list&&(n=this.$list.find("table.symbol-edit-popup"),i=n.find("tr:not(.hidden)"),s=n.find("tr.symbol-edit-popup-active").removeClass("symbol-edit-popup-active"),o=0!==s.length?i.index(s):-1,r=1===t?s.get(0)===i.get(-1)?0:o+t:Math.max(-1,o+t),o!==r&&(a=i.get(r))&&(l=this._getItemByElement(a),c=k.isRoot(l),c?(u=a.getAttribute("data-root"),a.classList.add("symbol-edit-popup-active"),this._scrollHighlightIntoView(),u?(this._state.highlightedItem=null,this._selectedGroupRoot=u):(this._state.highlightedItem=l,this._replaceCurrentSymbol(e))):(delete this._selectedGroupRoot,this._highlightItem(l,!0,e))))},t.prototype._groupToggleCollapsed=function(t,e){this._groupListHandler&&this._groupListHandler.toggleCollapsed(t,e)},t.prototype._onKeyDown=function(t){t.keyCode!==y.DOWN_ARROW&&t.keyCode!==y.UP_ARROW||(this._moveSelection(t.keyCode===y.DOWN_ARROW?1:-1,!0),t.preventDefault(),t.stopPropagation()),t.keyCode===y.ENTER&&t.stopPropagation(),!this._selectedGroupRoot||t.keyCode!==y.LEFT_ARROW&&t.keyCode!==y.RIGHT_ARROW||(this._groupToggleCollapsed(this._selectedGroupRoot,t.keyCode===y.LEFT_ARROW),t.preventDefault())},t.prototype._onKeyPress=function(t){if(t.keyCode===y.DOWN_ARROW||t.keyCode===y.UP_ARROW){if(t.charCode)return;if(this._boundOnKeyDown)return $(this._inputElement).off("keydown",this._boundOnKeyDown),delete this._boundOnKeyDown,void t.preventDefault()
;this._moveSelection(t.keyCode===y.DOWN_ARROW?1:-1),t.preventDefault()}t.keyCode===y.ENTER&&(this._selectedGroupRoot?(this._groupToggleCollapsed(this._selectedGroupRoot,!1),t.preventDefault()):this.acceptTypeIn())},t.prototype._eventListener=function(t,n){var i,s,o,r,a,l=this._inputElement,c=this._getInputValue();e.enabled("uppercase_instrument_names")&&(c=c.toUpperCase()),i=!1,s=!1,this._state.value!==c&&(this._state.hasOwnProperty("value")&&this._onValueChanged&&this._onValueChanged(c),this._state.value=c,i=!0,this._inputParserMixin&&this._inputParserMixin.parse()),this._fixIntervalCase(),o=this._limitInputSelectionValue("selectionStart"),this._state.selectionStart!==o&&(this._state.selectionStart=o,s=!0),r=this._limitInputSelectionValue("selectionEnd"),this._state.selectionEnd!==r&&(this._state.selectionEnd=r,s=!0),this._state.selectionDirection!==l.selectionDirection&&(this._state.selectionDirection=l.selectionDirection,s=!0),(i||s&&this._inputParserMixin)&&(this._onSelectionChanged(void 0,n),a=!1,this._getInputValue()!==this._state.value&&(this._setInputValue(this._state.value),a=!0),(a||this._state.selectionStart!==this._limitInputSelectionValue("selectionStart")||this._state.selectionEnd!==this._limitInputSelectionValue("selectionEnd"))&&l.setSelectionRange&&l.setSelectionRange(this._state.selectionStart,this._state.selectionEnd,this._state.selectionDirection))},t.prototype._fixIntervalCase=function(){if(this._selectionInsideInterval()){var e=t.detachInterval(this._inputElement.value);/[a-z]/.test(e.detached)&&(this._inputElement.value=e.rest+e.detached.toUpperCase())}},t.prototype._selectionInsideInterval=function(e){if(this._ignoreInterval)return!1;var n=t.detachInterval(this._inputElement.value);return!!n&&("string"==typeof e?this._inputElement[e]>n.rest.length:this._inputElement.selectionStart>n.rest.length&&this._inputElement.selectionEnd>n.rest.length)},t.prototype._limitInputSelectionValue=function(e){return this._selectionInsideInterval(e)?t.detachInterval(this._inputElement.value).rest.length:e in this._inputElement?this._inputElement[e]:this._inputElement.value.length},t.prototype._getInputValue=function(){if(this._ignoreInterval)return this._inputElement.value;var e=t.detachStoreInterval(this._inputElement.value);return $(this._inputElement).toggleClass("interval-error",t.intervalError()),e},t.prototype._setInputValue=function(e){this._ignoreInterval?this._inputElement.value=e:this._inputElement.value=t.recallAttachInterval(e)},t.prototype._onSelectionChanged=function(t,e){function n(t,e,n,i,o){s._state.contextTicker=t,s._state.contextExchange=e,s._state.contextType=n,s._state.contextTradable=o,s._state.keepListFor&&s._state.keepListFor===i||(s._getSuggestList(),delete s._state.keepListFor)}var i,s=this;!L.some(function(t){return t.test(s._state.value)})&&(this._isSpreadInInput()||this._inputParserMixin&&!0!==e)?this._inputParserMixin.onSelectionChanged(n):this.$list&&(this._state._selectedTicker=null,i=this._state.value,
this._isSpreadInInput()&&this._state.contextToken&&(i=this._state.contextToken.value),n(i,this.getExchangeFilter(),this._state.typeFilter,i,this._state.tradableFilter))},t.prototype._clearSelectionState=function(){delete this._state.contextTicker,delete this._state.contextExchange,delete this._state.contextType,delete this._state.contextToken,delete this._state.keepListFor},t.prototype._clearSearchTimeout=function(){this._searchTimeout&&(clearTimeout(this._searchTimeout),this._searchTimeout=null)},t.prototype._doGetSuggestList=function(){var t,e,n,o,r,a,l,c,u;this._clearSearchTimeout(),t=s(),e=this._state.contextTicker||"",n=this._state.contextExchange||this.getExchangeFilter()||"",o=this._state.typeFilter||"",r=t&&this._state.tradableFilter,a=t&&i().metainfo().unhideSymbolSearchGroups,l=a&&a.join(","),t&&tradingService().trackEvent("Symbol Search Tradable checkbox",r?"on":"off"),c=window.language||"",this._showLoading(),u=this,ChartApiInstance.searchSymbols(e,n,o,c,A,!1,t,r,l,function(t){e!==(u._state.contextTicker||"")||n!==(u._state.contextExchange||u.getExchangeFilter()||"")||o!==(u._state.typeFilter||"")||(o===m.types.QUANDL&&(t=u._processQuandlResponse(t)),u._renderSuggestList(t),u._onResponse(t))})},t.prototype._getSuggestList=function(){this._clearSearchTimeout(),this._searchTimeout=setTimeout(this._doGetSuggestList.bind(this),t.prototype.searchRequestDelay)},t.prototype._showLoading=function(){if(this.$list&&!this._spinner){this._clearSuggestList();var t=$('<div class="symbol-search-loading">').appendTo(this.$list);this._spinner=new f("medium").spin(t.get(0))}},t.prototype._groupContracts=function(t){var e,n,i,s,o,r=ChartApiInstance.futuresRegex(),a={},l=[];for(e=0;e<t.length;++e){if(n=t[e],n.prefix||Array.isArray(n.contracts))return t;"futures"===n.type?(i=r.exec(n.symbol),i?(s=i[1],s in a?o=a[s]:(o=l.length,a[s]=o,l.push({type:n.type,symbol:s,exchange:n.exchange,description:n.description,full_name:n.exchange+":"+s,contracts:[]})),l[o].contracts.push(n)):l.push(n)):l.push(n)}return l},t.prototype._renderSuggestList=function(n){var i,s,o,r,a,l,c,u,p,h;if(this.$list){if(n=this._groupContracts(n),E=v("futures-descriptions"),i=this,s=this._state,this._clearSuggestList(),o=_(s.contextTicker).trim(),r=RegExp(o.replace(" ","|"),"i"+(o.length>1?"g":"")),delete s.highlightedItem,this._hidePro&&(n=n.filter(function(t){return!t.params||-1===t.params.indexOf("pro")})),0===n.length)return void this.$list.html('<div style="text-align: center; padding: 7px 0; font-style: italic;">'+$.t("No symbols matched your criteria")+"</div>");for(a=document.createElement("table"),a.setAttribute("class","symbol-edit-popup"),l={},c=new t.GroupListHandler(a,r,l),u=null,this._renderedResponse=[],p=0;p<n.length;p++)h=n[p],c.append(h),u||h.ticker!==s.contextTicker||h.exchange!==s.contextExchange||(u=h),this._renderedResponse.push(h);e.enabled("expand_symbolsearch_items")||c.collapse(),this._groupListHandler=c,u&&this._highlightItem(h),$(a).on("click","tr",function(t){if(!t.isDefaultPrevented()){t.preventDefault()
;var e=i._getItemByElement(this);e&&e.full_name&&(i._isSpreadInInput()?i._highlightItem(e,!0,!1):i.accept(e.full_name,e.ticker))}}).appendTo(this.$list)}},t.prototype._isSpreadInInput=function(){return this._inputParserMixin&&this._state.parsed.length>1},t.prototype._getItemByElement=function(t){return this._renderedResponse&&this._groupListHandler?this._groupListHandler.getItemByTicker(t.getAttribute("data-item-ticker")):null},t.prototype._getElementByItem=function(t){return this._renderedResponse&&this.$list?this.$list.get(0).querySelector('tr[data-item-ticker="'+(t.ticker||t.full_name)+'"]'):null},t.prototype._highlightItem=function(t,e,n){var i,s,o=this._state;o.highlightedItem&&(i=this._getElementByItem(o.highlightedItem))&&$(i).removeClass("symbol-edit-popup-active"),o.highlightedItem=t,s=this._getElementByItem(o.highlightedItem),s&&($(s).addClass("symbol-edit-popup-active"),this._scrollHighlightIntoView()),e&&this._replaceCurrentSymbol(n)},t.prototype._scrollHighlightIntoView=function(){var t=this.$list.find("tr.symbol-edit-popup-active");t.length&&(t.offset().top<this.$list.offset().top?this.$list.scrollTop(this.$list.scrollTop()-(this.$list.offset().top-t.offset().top)):t.offset().top+t.outerHeight()>this.$list.offset().top+this.$list.outerHeight()&&this.$list.scrollTop(this.$list.scrollTop()+(t.offset().top+t.outerHeight()-(this.$list.offset().top+this.$list.outerHeight()))))},t.prototype._clearSuggestList=function(){this._renderedResponse=null,this._spinner&&(this._spinner.stop(),delete this._spinner),this.$list&&this.$list.empty()},t.prototype._showErrorNotice=function(){this.$list&&(this._clearSuggestList(),this.$list.text("Invalid expression"))},t.prototype._replaceCurrentSymbol=function(t){var e,n,i,s,o=this._state;if(o.highlightedItem){if(e=o.highlightedItem,n="",i=0,this._isSpreadInInput()||this._inputParserMixin&&!0!==t){if(s=this._inputParserMixin.replaceCurrentSymbol(e),!s.ok)return;n=s.newValue,i=s.newCaretPos,o.keepListFor=s.keepListFor}else this._state._selectedTicker=e.ticker||e.symbol,o.keepListFor=this._state._selectedTicker,n=!0===t&&e.full_name&&this._inputParserMixin?e.full_name:e.symbol,i=n.length;this._setInputValue(A?n.replace(V,""):n),this._inputElement.setSelectionRange?this._inputElement.setSelectionRange(i,i):this._inputElement.select(),this._eventListener(void 0,t)}},t.prototype.splitAndAcceptUserInput=function(){var t,e=this._getInputValue().split(",");for(t=0;t<e.length;t++)this.acceptSymbolIn(e[t])},t.prototype.acceptSymbolIn=function(t){var e,n;this._inputParserMixin?e=this._inputParserMixin.parseSymbol(t):(e=t,n=this._state._selectedTicker||t),this.accept(e,n)},t.prototype.acceptTypeIn=function(){this._allowMultipleSymbols?this.splitAndAcceptUserInput():this.acceptSymbolIn(this._getInputValue())},t.prototype.accept=function(e,n){var i=this;!function(){if((n=n||e)||""===n&&i.acceptEmpty){delete i._state.keepListFor;var s=i._ignoreInterval?void 0:t.getInterval(!0);i._inputElement.value=e,i._eventListener(),i._callback&&i._callback(n,s),
$(i._inputElement).trigger("accept-symbol",[n])}}()},t.prototype.bindListWrapper=function(t){if(t=$(t).eq(0),0===t.size())throw new TypeError("element must be a DOM element, jQuery object or selector");this.$list=t,this._clearSelectionState(),this._eventListener()},t.prototype.removeListWrapper=function(){delete this.$list,this._clearSuggestList(),this._clearSelectionState(),this._eventListener()},t.prototype.selectExchangeFilter=function(){this.$filterContainer.find(".exchange-filter").hide(),this._state.typeFilter===m.types.QUANDL?this.$filterContainer.find("#quandl-filter").show():this._state.typeFilter!==m.types.ECONOMIC&&this.$filterContainer.find("#exchange-filter").show()},t.prototype._onResponse=function(t){if(t.length>0){this._state.typeFilter===m.types.QUANDL&&this._showNotification()}},t.prototype._showNotification=function(){var t,e,n;TVSettings.getBool("symboledit.show_quandl_notification",!0)&&(t=$.t("Quandl is a huge financial database that we have connected to TradingView. Most of its data is EOD and is not updated in real-time, however the information may be extremely useful for fundamental analysis.")+' <a target="_blank" href="'+("ru"===window.locale?"http://blog.tradingview.com/?p=1530&lang=ru":"http://blog.tradingview.com/?p=1530")+'">'+$.t("Read our blog for more info!")+"</a>",e=$('<div class="symbol-edit-notification">').prependTo(this.$list),e.html(t),e.find("a").click(function(t){t.preventDefault();var e=$(this).attr("href");window.open(e,"_blank")}),n=$('<a class="close">').appendTo(e),n.click(function(){TVSettings.setValue("symboledit.show_quandl_notification",!1),e.remove()}))},t.prototype._processQuandlResponse=function(t){return t.datasets.filter(function(t){return!t.premium}).map(function(t){return{description:t.name,exchange:t.database_code,full_name:"QUANDL:"+t.database_code+"/"+t.dataset_code,params:["eod"],symbol:t.dataset_code,type:"quandl"}})},t.prototype.forceFocus=function(){this._inputElement.focus()},t.createSuggestListRow=function(e,n,i,s){var o,a,c,u,p,h,d,f,g,_,m,y,v,b;return s||(s={}),o=document.createElement("tr"),a="symbol-edit-popup",s.addClass&&(a+=" "+s.addClass),o.setAttribute("class",a),c=!A||"quandl"===e.type,u=document.createElement("td"),u.setAttribute("class","symbol-edit-popup-td name apply-overflow-tooltip apply-overflow-tooltip--allow-text"),p=c?e.symbol.replace(n,"<strong>$&</strong>"):e.symbol,h=s.nameContent||p,e.broker_symbol&&(h=h+" ("+(c?e.broker_symbol.replace(n,"<strong>$&</strong>"):e.broker_symbol)+")"),u.innerHTML=h,d=document.createElement("td"),d.setAttribute("class","symbol-edit-popup-td desc apply-overflow-tooltip"),f=e.description.toUpperCase(),E&&e.contractDescription&&(g=w.exec(e.contractDescription),f+=g?" ("+l(i,g[1])+" "+g[2]+")":" ("+l(i,e.contractDescription)+")"),d.innerHTML=!c||n.test(e.symbol)?f:f.replace(n,"<strong>$&</strong>"),_=document.createElement("td"),_.setAttribute("class","symbol-edit-popup-td type apply-overflow-tooltip"),m="",
s.typeContent?m=s.typeContent:(e.params&&~e.params.indexOf("eod")&&(m='<i class="eod">eod</i>&nbsp;'),y=l(i,e.type),e.exchange?e.exchange.startsWith("CHXEUR_")?m+=y+" - "+e.exchange.split("_")[0]:m+=y+" - "+r(e):m+=y),_.innerHTML=m,v=document.createElement("td"),v.setAttribute("class","symbol-edit-popup-td flag apply-overflow-tooltip"),v.innerHTML=t.getItemFlag(e),b=v.getElementsByTagName("svg")[0],b&&b.setAttribute("class","flag"),o.appendChild(u),o.appendChild(d),o.appendChild(_),o.appendChild(v),o},t.getItemFlag=function(t){return""},D=function(t,n,i,s){n=h.displayedExchangesFilter(n),!n.some(function(t){return t.value===i})&&n.length>0&&(i=n[0].value);var o=$("<select>").appendTo(s);n.forEach(function(t){var e=t.value,n=t.name||e,s=t.desc||n,r=$("<option>").addClass("filter-item").attr("value",e).text($.t(n)).data("custom-option-text",$.t(s)).appendTo(o);t.value===i&&r.attr("selected",!0)}),o.change(function(){var e=$(this).val()||"";TVSettings.setValue("symboledit.exchangefilter",e),t.setExchangeFilter(e)}),o.selectbox({speed:0,useCustomPrependWithSelector:"after",customPrependSelectorClass:"exchange-with-flag",classHolder:"tv-unstyled-select-container tv-symbol-select",classOptions:e.enabled("symbol_search_three_columns_exchanges")?"sbOptions three-column-filter":"sbOptions"})},t.showDialog=function(e){var i,s,o,r,a,l,u,p,h,d,f,g,_=n(219);if(e=e||{},i="Symbol Search",!TVDialogs.get(i))return s=TVDialogs.createDialog(i,{hideTitle:!0,hideCloseCross:!0,dragHandle:".filter",width:"750px",dragOptions:{cancel:".sbOptions"},content:_.dialogs.symbolSearch,ownerDocument:e.ownerDocument}),TVDialogs.positionDialog(s),o=s.find("._tv-dialog-content").addClass("symbol-search-dialog"),r=o.find(".results"),r.mousewheel(function(t,e){var n=$(this);e>0?n.scrollTop(n.scrollTop()-15):n.scrollTop(n.scrollTop()+15)}),a=o.find("input").get(0),e.initialValue&&(a.value=e.initialValue),"selectionStart"in a&&(a.selectionStart=a.selectionEnd=a.value.length),a.focus(),S()&&(e.ignoreInterval||(u=t.getInputValueGetter(a),p=t.getInputValueSetter(a)),l=SymbolSearchInputParserMixin.addSpreadActions(o.find(".spread-actions"),a,u,p)),h=new t({input:a,list:o.find(".results").get(0),callback:function(t,n){e.callback&&e.callback(t,n),TVDialogs.destroy(i)},onParse:l,ignoreInterval:e.ignoreInterval}),d=o.find(".filter"),h.$filterContainer=d,f=c(h,d),g=x(h,d),f||g||d.attr("style","display: none"),TVDialogs.resizeContent(s.height(),r),TVDialogs.applyHandlers(s),TVDialogs.positionDialog(s),s.on("destroy",function(){TVSettings.setValue("symboledit.dialog_last_entry",a.value)}),s},t.bindToInput=function(n,i){function s(){_&&(w.removeListWrapper(),_.off(),_.remove(),_=null,g.hide(),"function"==typeof i.onPopupClose&&i.onPopupClose())}function r(t){t.preventDefault()}function a(){var t,n,s,o;if(_||(t=C(w),_=t.popup,w.bindListWrapper(t.listWrapper),_.on("focus",r),_.on("click",r),_.on("mousedown",r),_.on("focus","*",r),_.on("click","*",r),_.on("mousedown","*",r),"function"==typeof i.onPopupOpen&&i.onPopupOpen(t.popup)),
e.enabled("charting_library_base")&&(n=this._state,n.keepListFor)){if(!n.highlightedItem)return void delete this._state.keepListFor;s=n.highlightedItem,o=this._getInputValue(),e.enabled("uppercase_instrument_names")&&(o=o.toUpperCase()),s.symbol!==o&&delete this._state.keepListFor}}function l(t,e){var n;return e?(RegExp("^"+m.types.QUANDL,"i").test(t)?(n=t.split(/\//),n.length&&(t=n[n.length-1])):t=p.seriesShortSymbol.value()||t,t):t}function c(t){var e=p.symbol.value()||"";e=l(e,t),n.val(e),w.resetState()}var u,h,d,f,_,v,b,E,I,w,x,T,k;return i=i||{},n=$(n).eq(0),u=i.callback,h=null,d=null,f=!1,_=null,b=i.spreadActions&&$(i.spreadActions).eq(0),b&&b.size()&&S()&&(i.ignoreInterval||(E=t.getInputValueGetter(n.get(0)),I=t.getInputValueSetter(n.get(0))),v=SymbolSearchInputParserMixin.addSpreadActions(b,n.get(0),E,I)),w=new t({input:n,onValueChanged:a,callback:function(t,e){s(),"function"==typeof d&&d(t,e)||("function"==typeof u&&u(t,e),"function"==typeof h&&h(t,e)),i.clearAfterAccept&&n.val(""),i.keepFocus?n.get(0).focus():n.get(0).blur(),w.resetState()},hidePro:i.hidePro,autoFocus:i.autoFocus,onEmptyApply:i.onEmptyApply,onParse:v,acceptEmpty:i.acceptEmpty,dontUseInputParser:i.dontUseInputParser,allowMultipleSymbols:i.allowMultipleSymbols,ignoreInterval:i.ignoreInterval}),x=!1,T=!0,TradingView.isMobile.iOS()&&$("body").css("cursor","pointer"),n.on("focus",function(t,e){x=!0,f=!0,w._skipAutoFocus?delete w._skipAutoFocus:setTimeout(function(){x&&n.get(0).select()},0)}),n.on("blur",function(t){var e,i,o,r,a=this;if(_&&(e=document.activeElement,i=_.is(e),o=_.has(e).length>0,(-1!==navigator.userAgent.indexOf("Trident")||-1!==navigator.userAgent.indexOf("MSIE"))&&(i||o)))return t.preventDefault(),t.stopImmediatePropagation(),void setTimeout(function(){n.focus()},0);TradingView.isMobile.iOS()&&T&&(T=!1,x=!0),TradingView.isMobile.iOS()&&x&&null===t.relatedTarget?(r=function(t){$(a).is($(t.target))||(x=!1,setTimeout(function(){s()},0),$(document).off("click","body",r))},$(document).on("click","body",r)):x=!1,setTimeout(function(){x||s()},0)}),i.syncWithChartWidget&&(c(!0),p.seriesShortSymbol.subscribe(function(){c(!0)}),h=function(t,e){f=!(t||e),t&&p.symbol.setValue(t),e&&o(e)},d=function(t,e){return!e&&(t===p.symbol.value()||(t===p.seriesShortSymbol.value()||void 0))},i.syncOnBlur&&n.on("blur",function(){f&&(c(!0),f=!1)}),k=function(){n.get(0).blur(),c(!1)},n.on("keypress",function(t){t.keyCode===y.ESC&&k()}),n.on("keydown",function(t){t.keyCode===y.ESC&&k()})),w},k.isRoot=function(t){return!(!t||!Array.isArray(t.contracts))},k.prototype.addRoot=function(t,e){var n,i;this._currentTbody=null,n=document.createElement("tbody"),this._container.appendChild(n),i=this,e.addEventListener("click",function(n){n.preventDefault(),e.classList.contains("collapsed")?i.expand(t):i.collapse(t)}),e.setAttribute("data-root",t),n.appendChild(e),this._roots[t]={titleRow:e,tbody:n}},k.prototype.append=function(e){var n,i,s,o,a,c=null,u=null;if(k.isRoot(e))for(n=e.symbol,i=(e.exchange||"unknown")+"_"+n,
c=t.createSuggestListRow(e,this._tickerRegExp,this._translationCache,{nameContent:"<div>"+(A?n:n.replace(this._tickerRegExp,"<strong>$&</strong>"))+"</div>",typeContent:l(this._translationCache,e.type)+(e.exchange&&" - "+r(e)),addClass:"group-title"}),this._roots[i]||this.addRoot(i,c),s=0;s<e.contracts.length;++s)o=e.contracts[s],a=t.createSuggestListRow(o,this._tickerRegExp,this._translationCache),u=o.ticker||o.full_name,this._itemsByTicker[u]=o,a.setAttribute("data-item-ticker",u),this._roots[i].tbody.appendChild(a);else this._currentTbody||(this._currentTbody=document.createElement("tbody"),this._container.appendChild(this._currentTbody)),c=t.createSuggestListRow(e,this._tickerRegExp,this._translationCache),this._currentTbody.appendChild(c);u=e.ticker||e.full_name,this._itemsByTicker[u]=e,c.setAttribute("data-item-ticker",u)},k.prototype.toggleCollapsed=function(t,e){var n;if(t)(n=this._roots[t])&&($(n.titleRow).toggleClass("collapsed",!!e),$(n.tbody).find("tr:not(.group-title)").toggleClass("hidden",!!e));else for(t in this._roots)this.toggleCollapsed(t,e)},k.prototype.collapse=function(t){this.toggleCollapsed(t,!0)},k.prototype.expand=function(t){this.toggleCollapsed(t,!1)},k.prototype.getItemByTicker=function(t){return this._itemsByTicker[t]||null},t.GroupListHandler=k,t.isIntervalInit=function(t){return/[\d,]/.test(t)&&e.enabled("show_interval_dialog_on_key_press")},t.detachInterval=function(t){var e=/,[^,]*$/i.exec(t)||[];if(e[0])return{rest:t.substr(0,t.length-e[0].length),detached:e[0]}},function(){var e="",n=null;t.resetStoredInterval=function(){e="",n=null},t.detachStoreInterval=function(i){var s=t.detachInterval(i);return s?(e=s.detached,n=b(e),s.rest):(t.resetStoredInterval(),i)},t.recallAttachInterval=function(t){return t+e},t.getInterval=function(e){var i=n;return!0===e&&t.resetStoredInterval(),i},t.getInputValueGetter=function(e){return function(){return t.detachStoreInterval(e.value)}},t.getInputValueSetter=function(e){return function(n){e.value=t.recallAttachInterval(n)}},t.intervalError=function(){return!(!e||/^,\s*$/.test(e))&&!n}}(),t.activateKeyPressHandler=function(){d.pushBackListener("symbolEdit",this._keyPressHandler)},t._keyPressHandler=function(i){var s,r=n(365);if(T(i))if(i.preventDefault(),s=String.fromCharCode(i.charCode),t.isIntervalInit(s))new r({callback:o,ownerDocument:i.target.ownerDocument}).show(s);else{if(!e.enabled("symbol_search_hot_key"))return;t.showDialog({initialValue:s,callback:function(t,e){p.symbol.setValue(t),e&&o(e)},ownerDocument:i.target.ownerDocument})}},t}();t.exports=x}).call(e,n(5))}});